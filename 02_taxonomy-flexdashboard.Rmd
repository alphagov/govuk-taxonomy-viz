---
title: "GOV.UK taxonomy interactive explorer [WIP]"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
# Call packages
library(flexdashboard)  # creates the dashboard framework
library(readr)  # reading data
library(collapsibleTree) # https://adeelk93.github.io/collapsibleTree/

# Read pre-prepared data from file 01_flatten-hierarchy.R
hierarchy_flat <- read_csv("output/hierarchy_flat.csv")

# Create interactive tree to be called in a later chunk
tree <- collapsibleTree(
  hierarchy_flat,  # input data frame
  hierarchy = paste0("level", 1:5),  # columns containing hierarchy
  root = "GOV.UK",  # name for root node
  zoomable = FALSE,  # zoom in and out of the plot
  fill = "#005ea5"  # set to GOV.UK default for now
)
```

Interactive tree {data-icon="ion-stats-bars"}
=====================================  

Column {data-width=650}
-----------------------------------------------------------------------

### Interactive tree

```{r tree}
tree  # render the interactive tree
```

Information {data-orientation=rows data-icon="fa-info-circle"}
===================================== 

Column {data-width=350}
-----------------------------------------------------------------------

### Counts

There are:

* `r length(unique(hierarchy_flat$level1))` level 1 taxons
* `r length(unique(hierarchy_flat$level2))` level 2 taxons
* `r length(unique(hierarchy_flat$level3))` level 3 taxons
* `r length(unique(hierarchy_flat$level4))` level 4 taxons
* `r length(unique(hierarchy_flat$level5))` level 5 taxons

### More information

[Awaiting content]